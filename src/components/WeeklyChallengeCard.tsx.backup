import { useState } from 'react';
import { Target, Check } from 'lucide-react';
import { Card } from './ui/card';
import { Button } from './ui/button';
import { toast } from 'sonner';

const challenges = [
  'Aplique a técnica do Módulo 2 e não envie mensagem por 48h',
  'Assista 3 aulas esta semana e pratique o que aprendeu',
  'Complete um módulo inteiro sem pausas',
  "Aplique a 'Frase de 5 Palavras' numa conversa real",
  'Faça o exercício de auto-reflexão do Módulo 1',
];

export const WeeklyChallengeCard = () => {
  const [accepted, setAccepted] = useState(false);
  const weekNumber = Math.floor(Date.now() / (7 * 24 * 60 * 60 * 1000)) % challenges.length;
  const currentChallenge = challenges[weekNumber];

  const handleAccept = () => {
    setAccepted(true);
    toast.success('Desafio aceite! Vamos nessa!');
  };

  return (
    <Card className="border-border p-6 transition-colors hover:bg-accent/50">
      <div className="flex items-start gap-4">
        {/* Ícone simples */}
        <div className="flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full border-2 border-border">
          {accepted ? (
            <Check className="h-6 w-6 text-foreground" />
          ) : (
            <Target className="h-6 w-6 text-foreground" />
          )}
        </div>

        {/* Conteúdo */}
        <div className="flex-1 space-y-3">
          <div>
            <h3 className="mb-1 text-lg font-medium text-foreground">
              Desafio da Semana
            </h3>
            <p className="text-sm text-muted-foreground">
              {currentChallenge}
            </p>
          </div>

          <Button
            onClick={handleAccept}
            disabled={accepted}
            variant={accepted ? 'outline' : 'default'}
            size="sm"
            className="w-full sm:w-auto"
          >
            {accepted ? 'Desafio Aceite' : 'Aceitar Desafio'}
          </Button>
        </div>
      </div>
    </Card>
  );
};
